<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>Status — Live Checker</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Rajdhani:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root{
            --bg: #0a0f1a;
            --text:#e7fbff;
            --muted:#9ac6cf;
            --accent:#00f0ff;
        }
        *{
            box-sizing:border-box
        }
        html,body{
            margin:0;
            height:100%;
            background:radial-gradient(1200px 600px at 50% -200px, rgba(0,240,255,0.08), transparent 50%), #0a0f1a;
            color:var(--text);
            font-family:'Rajdhani', system-ui, -apple-system, Segoe UI, Roboto, Arial;
        }
        .wrap{
            max-width:960px;
            margin:40px auto;
            padding:20px;
        }
        h1{
            font-family:'Orbitron';
            font-size:24px;
            letter-spacing:1px;
            margin:0 0 18px
        }
        .bar{
            display:flex;
            gap:10px;
            align-items:center;
            margin-bottom:18px
        }
        .bar input{
            flex:1;
            padding:10px 12px;
            font-size:16px;
            border-radius:10px;
            border:1px solid rgba(255,255,255,0.12);
            background:rgba(255,255,255,0.04);
            color:var(--text);
            outline:none;
        }
        .bar button{
            padding:10px 14px;
            border-radius:10px;
            border:none;
            font-weight:700;
            cursor:pointer;
            background:linear-gradient(90deg,#00f0ff,#8b5cf6);
            color:#041018;
        }
        .hint{
            color:var(--muted);
            font-size:13px;
            margin-bottom:14px
        }
        .results{
            display:grid;
            gap:10px
        }
        .card{
            padding:12px;
            border-radius:10px;
            background:rgba(255,255,255,0.04);
            border:1px solid rgba(255,255,255,0.08);
        }
    </style>
</head>
<body>
    <div class="wrap">
        <h1>Live Status</h1>
        <div class="bar">
            <input id="search" type="search" placeholder="Search product..." aria-label="Search for product status">
            <button id="searchBtn" aria-label="Perform search">Search</button>
        </div>
        <div class="hint">Tip: Arriving from Devil Store with a product pre-filled uses the q parameter.</div>
        <div id="results" class="results"></div>
    </div>
    <script>
        /*
        * A simple live status checker page that works with the Devil Store webpage.
        * It can be populated with data from the URL (?q=product-name) and provides
        * real-time search results based on a predefined dataset.
        */

        /*
        * Demo dataset with product names and their statuses.
        * In a real application, this data would be fetched from a live API.
        */
        const ITEMS = [
            { name: "CALL OF DUTY — FECURITY", status: "UNDETECTED" },
            { name: "CALL OF DUTY — DULLWAVE", status: "UNDETECTED" },
            { name: "APEX LEGENDS — ARCAN", status: "UNDETECTED" },
            { name: "BSS — PUBG", status: "DETECTED" },
            { name: "ARCAN — PUBG", status: "DETECTED" },
            { name: "DODO — PUBG", status: "UNDETECTED" },
            { name: "IO — PUBG", status: "UNDETECTED" }
        ];

        // Get DOM elements
        const input = document.getElementById('search');
        const btn = document.getElementById('searchBtn');
        const root = document.getElementById('results');

        /**
         * Renders the search results based on the query.
         * @param {string} q - The search query string.
         */
        function renderResults(q) {
            root.innerHTML = '';
            const needle = (q || '').toLowerCase().trim();

            if (!needle) {
                root.innerHTML = '<div class="card">Type to search for product status…</div>';
                return;
            }

            const matched = ITEMS.filter(x => x.name.toLowerCase().includes(needle));

            if (matched.length === 0) {
                root.innerHTML = `<div class="card">No results found for: <strong>${escapeHtml(q)}</strong></div>`;
                return;
            }

            matched.forEach(item => {
                const div = document.createElement('div');
                div.className = 'card';
                div.textContent = `${item.name} — `;
                const statusSpan = document.createElement('span');

                // Apply styles based on status
                if (item.status === "OK") {
                    statusSpan.style.color = '#00ff9a';
                    statusSpan.textContent = 'OK';
                } else if (item.status === "MAINTENANCE") {
                    statusSpan.style.color = '#ffc107';
                    statusSpan.textContent = 'MAINTENANCE';
                } else if (item.status === "DOWN") {
                    statusSpan.style.color = '#ff4c6b';
                    statusSpan.textContent = 'DOWN';
                } else {
                    statusSpan.style.color = 'var(--muted)';
                    statusSpan.textContent = 'UNKNOWN';
                }

                div.appendChild(statusSpan);
                root.appendChild(div);
            });
        }

        /**
         * Escapes HTML characters in a string to prevent XSS.
         * @param {string} s - The string to escape.
         * @returns {string} The escaped string.
         */
        function escapeHtml(s) {
            return String(s).replace(/[&<>"']/g, m => ({
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#39;'
            }[m]));
        }

        // Wire search input events
        input.addEventListener('input', () => renderResults(input.value));
        input.addEventListener('keyup', (e) => {
            if (e.key === 'Enter') {
                renderResults(input.value);
            }
        });

        // Wire search button event
        btn.addEventListener('click', (e) => {
            e.preventDefault();
            renderResults(input.value);
        });

        /*
        * Auto-fill search input from URL parameter (?q=) on page load.
        */
        (function() {
            function onReady(fn) {
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', fn);
                } else {
                    fn();
                }
            }

            onReady(() => {
                const params = new URLSearchParams(location.search);
                const q = params.get('q');
                if (q) {
                    input.value = decodeURIComponent(q);
                }
                renderResults(input.value);
                input.focus();
            });
        })();
    </script>
</body>
</html>
